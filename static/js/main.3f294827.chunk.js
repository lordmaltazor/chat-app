(this["webpackJsonpmulti-language-chat-app"]=this["webpackJsonpmulti-language-chat-app"]||[]).push([[0],{25:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(3),s=a(5),r=a.n(s),c=a(18),i=a.n(c),u=a(11),l=a.n(u),o=a(15),d=a(8),m=(a(25),a(10));a(29);m.a.initializeApp({apiKey:"AIzaSyDUs5a4BikKnPy9W2C_Zxhe5jSb8icwez0",authDomain:"multi-language-chat-app-f8696.firebaseapp.com",projectId:"multi-language-chat-app-f8696",storageBucket:"multi-language-chat-app-f8696.appspot.com",messagingSenderId:"607018711041",appId:"1:607018711041:web:2050e05e3355c884eaa800"});var j=m.a.firestore();var p=function(e){var t=e.message,a=e.username;return Object(n.jsxs)("div",{className:"message-container",children:[Object(n.jsx)("p",{className:"message-sender",style:{textAlign:t.sender===a?"right":"left"},children:t.sender}),Object(n.jsx)("p",{className:"message",style:{textAlign:t.sender===a?"right":"left"},children:t.text})]})},f=a(12);var b=function(e){var t=e.sendMessage,a=e.updateMessage;return Object(n.jsxs)("form",{className:"new-message-form",onSubmit:t,children:[Object(n.jsx)("input",{className:"new-message-input",type:"text",onChange:a,placeholder:"Type something... "}),Object(n.jsx)("button",{className:"send-message-button",children:"Send"})]})};var g=function(e){var t=e.messagesRef,a=e.sendMessage,r=e.updateMessage,c=e.username,i=Object(s.useRef)(null),u=Object(s.useState)(!0),l=Object(d.a)(u,2),o=l[0],m=l[1],j=t.orderBy("createdAt"),g=Object(f.a)(j,{idField:"id"}),h=Object(d.a)(g,1)[0];Object(s.useEffect)((function(){i.current&&!1===o&&O()}),[h]);var O=function(){i.current.scrollTop=i.current.scrollHeight};return Object(n.jsxs)("div",{className:"chat-room",children:[Object(n.jsx)("div",{className:"messages",ref:i,onScroll:function(){null!=i.current&&i.current.scrollTop+i.current.offsetHeight===i.current.scrollHeight?m(!1):m(!0)},children:h&&h.map((function(e){return Object(n.jsx)(p,{message:e,username:c},e.id)}))}),Object(n.jsx)("button",{className:"enable-realtime-messaging-button",onClick:O,style:{opacity:o?"1":"0"},children:Object(n.jsx)("i",{className:"fas fa-arrow-down"})}),Object(n.jsx)(b,{sendMessage:a,updateMessage:r})]})};var h=function(e){var t=e.setUsername,a=e.usersRef,r=Object(s.useState)(""),c=Object(d.a)(r,2),i=c[0],u=c[1],l=Object(s.useState)(!1),o=Object(d.a)(l,2),m=o[0],j=o[1],p=a.orderBy("createdAt"),b=Object(f.a)(p,{idField:"id"}),g=Object(d.a)(b,1)[0],h=function(e){return g.map((function(e){return e.name})).includes(e)};return Object(n.jsxs)("form",{className:"login-form",onSubmit:function(e){e.preventDefault(),h(i)?j(!0):(t(i),j(!1))},children:[Object(n.jsx)("p",{className:"username",children:"Username:"}),Object(n.jsx)("input",{type:"text",onChange:function(e){u(e.target.value)}}),Object(n.jsx)("button",{children:"Sign in"}),Object(n.jsx)("p",{className:"taken-username",style:{visibility:m?"visible":"hidden"},children:"That username is taken!"})]})};var O=function(){var e=Object(s.useState)(""),t=Object(d.a)(e,2),a=t[0],r=t[1],c=Object(s.useState)(""),i=Object(d.a)(c,2),u=i[0],p=i[1],f=j.collection("messages"),b=j.collection("users"),O=function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==u){e.next=3;break}return e.abrupt("return");case 3:return t.target.reset(),e.next=6,f.add({text:u,sender:a,createdAt:m.a.firestore.FieldValue.serverTimestamp()});case 6:p("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){""!=a&&x()}),[a]);var x=function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.add({name:a,createdAt:m.a.firestore.FieldValue.serverTimestamp()});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"app",style:{justifyContent:a?"space-between":"center"},children:a?Object(n.jsx)(g,{messagesRef:f,sendMessage:O,updateMessage:function(e){p(e.target.value)},username:a}):Object(n.jsx)(h,{setUsername:r,usersRef:b})})},x=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,31)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))};i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(O,{})}),document.getElementById("root")),x()}},[[30,1,2]]]);
//# sourceMappingURL=main.3f294827.chunk.js.map