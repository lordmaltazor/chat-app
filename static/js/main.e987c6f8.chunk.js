(this["webpackJsonpmulti-language-chat-app"]=this["webpackJsonpmulti-language-chat-app"]||[]).push([[0],{25:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(3),s=a(6),r=a.n(s),c=a(18),i=a.n(c),u=a(11),l=a.n(u),d=a(15),o=a(8),m=(a(25),a(10));a(29);m.a.initializeApp({apiKey:"AIzaSyDUs5a4BikKnPy9W2C_Zxhe5jSb8icwez0",authDomain:"multi-language-chat-app-f8696.firebaseapp.com",projectId:"multi-language-chat-app-f8696",storageBucket:"multi-language-chat-app-f8696.appspot.com",messagingSenderId:"607018711041",appId:"1:607018711041:web:2050e05e3355c884eaa800"});var p=m.a.firestore();var j=function(e){var t=e.message,a=e.username;return Object(n.jsxs)("div",{className:"message-container",children:[Object(n.jsx)("p",{className:"message-sender",style:{textAlign:t.sender===a?"right":"left"},children:t.sender}),Object(n.jsx)("p",{className:"message",style:{textAlign:t.sender===a?"right":"left"},children:t.text})]})},b=a(12);var g=function(e){var t=e.sendMessage,a=e.updateMessage;return Object(n.jsxs)("form",{className:"new-message-form",onSubmit:t,children:[Object(n.jsx)("input",{className:"new-message-input",type:"text",onChange:a}),Object(n.jsx)("button",{className:"send-message-button",children:"Send"})]})};var f=function(e){var t=e.messagesRef,a=e.sendMessage,s=e.updateMessage,r=e.username,c=t.orderBy("createdAt"),i=Object(b.a)(c,{idField:"id"}),u=Object(o.a)(i,1)[0];return u&&u.length>50&&t.doc(u[0].id).delete(),Object(n.jsxs)("div",{className:"chat-room",children:[Object(n.jsx)("div",{className:"messages",children:u&&u.map((function(e){return Object(n.jsx)(j,{message:e,username:r},e.id)}))}),Object(n.jsx)(g,{sendMessage:a,updateMessage:s})]})};var h=function(e){var t=e.setUsername,a=e.usersRef,r=Object(s.useState)(""),c=Object(o.a)(r,2),i=c[0],u=c[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),m=d[0],p=d[1],j=a.orderBy("createdAt"),g=Object(b.a)(j,{idField:"id"}),f=Object(o.a)(g,1)[0],h=function(e){return f.map((function(e){return e.name})).includes(e)};return Object(n.jsxs)("form",{className:"login-form",onSubmit:function(e){e.preventDefault(),h(i)?p(!0):(t(i),p(!1))},children:[Object(n.jsx)("p",{className:"username",children:"Username:"}),Object(n.jsx)("input",{type:"text",onChange:function(e){u(e.target.value)}}),Object(n.jsx)("button",{children:"Sign in"}),Object(n.jsx)("p",{className:"taken-username",style:{visibility:m?"visible":"hidden"},children:"That username is taken!"})]})};var O=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(s.useState)(""),i=Object(o.a)(c,2),u=i[0],j=i[1],b=p.collection("messages"),g=p.collection("users"),O=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==u){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,b.add({text:u,sender:a,createdAt:m.a.firestore.FieldValue.serverTimestamp()});case 5:j(""),t.target.reset();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){""!=a&&x()}),[a]);var x=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.add({name:a,createdAt:m.a.firestore.FieldValue.serverTimestamp()});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"app",style:{justifyContent:a?"space-between":"center"},children:a?Object(n.jsx)(f,{messagesRef:b,sendMessage:O,updateMessage:function(e){j(e.target.value)},username:a}):Object(n.jsx)(h,{setUsername:r,usersRef:g})})},x=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,31)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))};i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(O,{})}),document.getElementById("root")),x()}},[[30,1,2]]]);
//# sourceMappingURL=main.e987c6f8.chunk.js.map