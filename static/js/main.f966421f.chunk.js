(this["webpackJsonpmulti-language-chat-app"]=this["webpackJsonpmulti-language-chat-app"]||[]).push([[0],{25:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a=n(3),s=n(4),r=n.n(s),c=n(18),i=n.n(c),u=n(11),l=n.n(u),o=n(15),j=n(8),d=(n(25),n(10));n(29);d.a.initializeApp({apiKey:"AIzaSyDUs5a4BikKnPy9W2C_Zxhe5jSb8icwez0",authDomain:"multi-language-chat-app-f8696.firebaseapp.com",projectId:"multi-language-chat-app-f8696",storageBucket:"multi-language-chat-app-f8696.appspot.com",messagingSenderId:"607018711041",appId:"1:607018711041:web:2050e05e3355c884eaa800"});var f=d.a.firestore();var m=function(e){var t=e.message,n=e.username;return Object(a.jsxs)("div",{className:"message-container",children:[Object(a.jsx)("p",{className:"message-sender",style:{textAlign:t.sender===n?"right":"left"},children:t.sender}),Object(a.jsx)("p",{className:"message",style:{textAlign:t.sender===n?"right":"left"},children:t.text})]})},b=n(12);var p=function(e){var t=e.sendMessage,n=e.updateMessage,r=Object(s.useRef)(null);Object(s.useEffect)((function(){c()}),[]);var c=function(){r.current.focus()};return Object(a.jsxs)("form",{className:"new-message-form",onSubmit:t,children:[Object(a.jsx)("input",{className:"new-message-input",type:"text",ref:r,onChange:n,placeholder:"Type something... "}),Object(a.jsx)("button",{className:"send-message-button",onClick:c,children:"Send"})]})};var g=function(e){var t=e.messagesRef,n=e.sendMessage,r=e.updateMessage,c=e.username,i=Object(s.useRef)(null),u=Object(s.useState)(!0),l=Object(j.a)(u,2),o=l[0],d=l[1],f=t.orderBy("createdAt"),g=Object(b.a)(f,{idField:"id"}),O=Object(j.a)(g,1)[0];Object(s.useEffect)((function(){i.current&&!1===o&&h()}),[O]);var h=function(){i.current.scrollTop=i.current.scrollHeight};return Object(a.jsxs)("div",{className:"chat-room",children:[Object(a.jsx)("div",{className:"messages",ref:i,onScroll:function(){null!=i.current&&i.current.scrollTop+i.current.offsetHeight===i.current.scrollHeight?d(!1):d(!0)},children:O&&O.map((function(e){return Object(a.jsx)(m,{message:e,username:c},e.id)}))}),Object(a.jsx)("button",{className:"enable-realtime-messaging-button",onClick:h,style:{opacity:o?"1":"0"},children:Object(a.jsx)("i",{className:"fas fa-arrow-down"})}),Object(a.jsx)(p,{sendMessage:n,updateMessage:r})]})};var O=function(e){var t=e.setUsername,n=e.usersRef,r=Object(s.useState)(""),c=Object(j.a)(r,2),i=c[0],u=c[1],l=Object(s.useState)(!1),o=Object(j.a)(l,2),d=o[0],f=o[1],m=Object(s.useState)(!1),p=Object(j.a)(m,2),g=p[0],O=(p[1],n.orderBy("createdAt")),h=Object(b.a)(O,{idField:"id"}),x=Object(j.a)(h,1)[0],v=function(e){return x.map((function(e){return e.name})).includes(e)};return Object(a.jsxs)("form",{className:"login-form",onSubmit:function(e){e.preventDefault(),v(i)?f(!0):(t(i),f(!1))},children:[Object(a.jsx)("p",{className:"username",children:"Username:"}),Object(a.jsx)("input",{type:"text",onChange:function(e){u(e.target.value)}}),Object(a.jsx)("button",{className:"login-button",children:g?"Login":"Sign up"}),Object(a.jsx)("p",{className:"taken-username",style:{visibility:d?"visible":"hidden"},children:"That username is taken!"})]})};var h=function(){var e=Object(s.useState)(""),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(s.useState)(""),i=Object(j.a)(c,2),u=i[0],m=i[1],b=f.collection("messages"),p=f.collection("users"),h=function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==u){e.next=3;break}return e.abrupt("return");case 3:return t.target.reset(),e.next=6,b.add({text:u,sender:n,createdAt:d.a.firestore.FieldValue.serverTimestamp()});case 6:m("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){""!=n&&x()}),[n]);var x=function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.add({name:n,createdAt:d.a.firestore.FieldValue.serverTimestamp()});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"app",style:{justifyContent:n?"space-between":"center"},children:n?Object(a.jsx)(g,{messagesRef:b,sendMessage:h,updateMessage:function(e){m(e.target.value)},username:n}):Object(a.jsx)(O,{setUsername:r,usersRef:p})})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,31)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(h,{})}),document.getElementById("root")),x()}},[[30,1,2]]]);
//# sourceMappingURL=main.f966421f.chunk.js.map